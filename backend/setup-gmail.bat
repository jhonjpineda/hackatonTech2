@echo off
chcp 65001 > nul
cls

echo.
echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo โ                                                                โ
echo โ          ๐ง CONFIGURACIรN DE GMAIL INSTITUCIONAL              โ
echo โ                  soportetech@ucaldas.edu.co                   โ
echo โ                                                                โ
echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo.
echo.

echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo โ PASO 1: Habilitar Verificaciรณn en 2 Pasos                     โ
echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo.
echo   1. Abre tu navegador
echo   2. Ve a: https://myaccount.google.com/signinoptions/two-step-verification
echo   3. Inicia sesiรณn con: soportetech@ucaldas.edu.co
echo   4. Click en "Empezar" y sigue las instrucciones
echo   5. Ingresa tu nรบmero de telรฉfono y el cรณdigo SMS
echo.
echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
pause
cls

echo.
echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo โ          ๐ง CONFIGURACIรN DE GMAIL INSTITUCIONAL              โ
echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo.
echo.

echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo โ PASO 2: Crear App Password                                    โ
echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo.
echo   1. Abre: https://myaccount.google.com/apppasswords
echo   2. Escribe: HackatonTech2
echo   3. Click en "Crear"
echo.
echo   โ๏ธ  IMPORTANTE:
echo   โ Copia la contraseรฑa de 16 caracteres que aparece
echo   โ Se verรก algo como: abcd efgh ijkl mnop
echo.
echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
pause
cls

echo.
echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo โ          ๐ง CONFIGURACIรN DE GMAIL INSTITUCIONAL              โ
echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo.
echo.

echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo โ PASO 3: Configurar .env                                       โ
echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo.
echo   Ahora voy a abrir el archivo .env en el Bloc de notas.
echo.
echo   Busca esta lรญnea:
echo      EMAIL_PASSWORD=TU_APP_PASSWORD_DE_16_CARACTERES_AQUI
echo.
echo   Reemplรกzala con tu App Password (16 caracteres):
echo      EMAIL_PASSWORD=abcdefghijklmnop
echo.
echo   Guarda el archivo (Ctrl + S)
echo.
echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
pause

notepad .env

cls

echo.
echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo โ          ๐ง CONFIGURACIรN DE GMAIL INSTITUCIONAL              โ
echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo.
echo.

echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo โ PASO 4: Probar Configuraciรณn                                  โ
echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo.
echo   ๐งช Ejecutando script de prueba...
echo.

node test-email.js

echo.
echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo โ ยฟRecibiste el email de prueba?                                โ
echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo.
set /p RESPUESTA="  [S/N]: "

if /i "%RESPUESTA%"=="S" (
    echo.
    echo   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
    echo   โ  โ ยกCONFIGURACIรN COMPLETADA EXITOSAMENTE!              โ
    echo   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
    echo.
    echo   ๐ง Los emails ahora se envรญan desde: soportetech@ucaldas.edu.co
    echo   โ Los usuarios recibirรกn cรณdigos de verificaciรณn reales
    echo   ๐ El sistema estรก listo para producciรณn
    echo.
    echo   Siguiente paso:
    echo   Inicia el backend con: npm run start:dev
    echo.
) else (
    echo.
    echo   โ No se recibiรณ el email. Posibles causas:
    echo.
    echo   1. La App Password es incorrecta
    echo   2. No habilitaste la verificaciรณn en 2 pasos
    echo   3. El email llegรณ a SPAM
    echo.
    echo   ๐ก Soluciรณn:
    echo   - Revisa la carpeta de SPAM en soportetech@ucaldas.edu.co
    echo   - Lee el archivo: GMAIL_INSTITUCIONAL_SETUP.md
    echo   - Ejecuta de nuevo: setup-gmail.bat
    echo.
)

echo.
pause
